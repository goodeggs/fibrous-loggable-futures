# Fibrous Loggable Futures

Fibrous mixin to log results of futures, and wait for logged results

[![NPM version](http://img.shields.io/npm/v/fibrous-loggable-futures.svg?style=flat-square)](https://www.npmjs.org/package/fibrous-loggable-futures)
[![Build Status](http://img.shields.io/travis/goodeggs/fibrous-loggable-futures.svg?style=flat-square)](https://travis-ci.org/goodeggs/fibrous-loggable-futures)
[![MIT License](http://img.shields.io/badge/license-MIT-blue.svg?style=flat-square)](https://github.com/goodeggs/fibrous-loggable-futures/blob/master/LICENSE.md)

## Usage

```
npm install fibrous-loggable-futures
```

```js
var fibrous = require('fibrous'),
    loggableFutures = require('fibrous-loggable-futures'),
    logger = {
      info: function(message),
      error: function(context, message)
    }

loggableFutures(fibrous, logger)
```

Now you can log results of futured work:
```js
email.future.send(...).andLogResults("you'll get this in the future")
```

Pass a flag if you only want to hear about errors:
```js
email.future.send(...).andLogResults("and this one too", {errorsOnly: true})
```

For quick and dirty synchronization, you can wait for all logged futures to resolve:
```js
sendAll = ->
  email.future.send(...).andLogResults('message')
  email.future.send(...).andLogResults('message')

/* Somewhere else, like a test */
fibrous.captureLoggedFutures()
sendAll()
fibrous.sync.waitForLoggedFutures()
// ...
fibrous.uncaptureLoggedFutures()
```

## Contributing

Please follow our [Code of Conduct](https://github.com/goodeggs/mongoose-webdriver/blob/master/CODE_OF_CONDUCT.md)
when contributing to this project.

```
$ git clone https://github.com/goodeggs/fibrous-loggable-futures && cd fibrous-loggable-futures
$ npm install
$ npm test
```

_Module scaffold generated by [generator-goodeggs-npm](https://github.com/goodeggs/generator-goodeggs-npm)._
